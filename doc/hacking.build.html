<html>
<head>
    <title>SGUI - Hacking SGUI</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<h1>SGUI</h1>

<h2>Hacking SGUI</h2>

<h3>The SGUI build system</h3>

The SGUI library uses a CMake base build system. Since the demo programs need
special files and the Windows&reg; backend needs the freetype DLL, the build
tree stub is contained within the source tree.<br>
<br>
To compile and build everything, issue the following commands from within the
source directory:
<p class="code">
<font class="command">cd</font> build<br>
<font class="command">cmake</font> ..<br>
<font class="command">make</font><br>
</p>
Or to cross compile everything for Windows&reg;:
<p class="code">
<font class="command">cd</font> build<br>
<font class="command">cmake</font> .. -DCMAKE_TOOLCHAIN_FILE="../CMake/mingw.cmake"<br>
<font class="command">make</font><br>
</p>
Alternatively, use "mingw64.cmake" for a 64 bit Windows&reg; build.<br>
<br>
<i>Note: While it should theoretically work to compile everything on
   Windows&reg; (and there is even a VisualStudio&reg; configuration in the
   CMakeLists.txt), nobody I know of has ever tried to do that. It is
   advisable to use mingw on a UNIX&reg; or UNIX-like system to cross compile
   SGUI for windows.</i>
<br>
<br>
If you have too much time on your hands and want to generate binary packages
for all platforms, as well as source and SDK packages with doxygen
documentation, run the command <b>./package.sh</b> from the source directory.
It takes care of all of that automatically.<br>
<br>
If you are "manually" running cmake the following build options are available:
<ul>
<li><b>MEMCANVAS</b> Enable or disable the memory canvas implementation.
    <b>Default: ON</b>. This option might not be disabled if the backend
    implementation for the current platform needs the memory canvas. If this
    is set to OFF, the definition <b>SGUI_NO_MEM_CANVAS</b> is set via the
    preprocessor.
<li><b>OPENGL</b> Enable or disable OpenGL&reg; support. <b>Default: ON</b>
    If this is set to OFF, the definition <b>SGUI_NO_OPENGL</b> is set via the
    preprocessor.
<li><b>NOFLOAT</b> Can be used to disable all internal use of floating point
    data types. <b>Default: OFF</b>. If this is set to ON, the definition
    <b>SGUI_NO_FLOAT</b> is set via the preprocessor.
    <br>
    <i>Note: The SGUI library does currently not make use of floating
    point calculations internally. This option currently only effects the
    supported data types of the event system.</i>
</ul>

Depending on the target operating system, the following definitions are set
via the preprocessor:
<ul>
<li>MACHINE_OS_WINDOWS
<li>MACHINE_OS_UNIX
</ul>
<br>
The <b>package.sh</b> scripts generates the following type of packages:
<ul>
<li><b>sgui_src.tar.gz</b> and <b>sgui_src.zip</b> that contain the original
    source tree.
<li><b>sgui_dev.tar.gz</b> and <b>sgui_dev.zip</b> that contain the platform
    independend development files, i.e. headers and documation.
<li><b>sgui_&lt;platform&gt;.tar.gz</b> and <b>sgui_&lt;platform&gt;.zip</b>
    that contain the binaries for a platform and all additional files required
    to run the samples.
</ul>

<h3>The source directory tree</h3>

The library is split into several modules, each in a dedicated subdirectory,
that are then compiled into a single library:
<ul>
<li><b>core</b> The library core. Contains basic widget data structure, widget
    handling, window system abstraction, font rendering, helper data
    structures, etc.
<li><b>widgets</b> The GUI widgets. Contains only the implementations of the
    individual widgets.
</ul>
Each of those modules contains an <b>include/</b> directory with headers,
a <b>src/</b> directory with source files and a <b>CMakeLists.txt</b>.<br>
<br>
Other than that, there are few more sub directories:
<ul>
<li><b>build</b> The output directory, see below.
<li><b>CMake</b> Contains CMake files (e.g. mingw cross toolchain config)
<li><b>doc</b> The hand written HTML documation you are reading right now
<li><b>extras</b> Contains example and demo programms
</ul>

In addition, the source directory contains a <b>CMakeLists.txt</b>, a doxygen
<b>Doxyfile</b> the textfiles <b>LICENSE</b> and <b>README</b> as well as the
beforementioned <b>package.sh</b>.
<br>
<br>
The combined <b>include</b> directories, the <b>doc</b> directory, the
<b>extras</b> directory and the generated doxygen documentation end up in the
development package.<br>
<br>
Everything inside the source tree ends up in the source package.<br>
<br>
The <b>LICENSE</b> and <b>README</b> files are added to every package.

<h3>The output directory tree</h3>

The output directory initially contains the following entries:
<ul>
<li><b>font</b> This directory contains the TTF font file required by the
    example and demo programs.
<li><b>win_dep</b> This directory contains additional dependencies for
    the Windows&reg; build (currently only FreeType binaries and headers).
<li><b>runvalgrind.sh</b> This script runs valgrind on a sample program using
    the given valgrind surpression file.
<li><b>valgrind.supp</b> A valgrind surpression file that's supposed to hide
    reported memory leeks inside the X11 XIM functions, and Mesa3D.
</ul>
<br>
When building SGUI, a lot of temporary clutter is generated by CMake and make.
The interesting directores are <b>bin</b> and <b>lib</b>, the former
containing executables and dynamic libraries and the later containing static
libraries.

<hr>
<a href="hacking.oop.html">Previous</a>
<a href="index.html">Back to index</a>
<a href="hacking.event.html">Next</a>

</body>
</html>

