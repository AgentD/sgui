<html>
<head>
    <title>SGUI - Hacking SGUI</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<h1>SGUI</h1>

<h2>Hacking SGUI</h2>

<h3>The SGUI build system</h3>

For an overview on how to <i>use</i> the build system, how to compile SGUI,
how to configure the build system and what options are available, please
refere to the section <a href="compiling.html">Compiling the SGUI library</a>.
<br>
<br>

<h4>The source directory tree</h4>

The library is split into several modules, each in a dedicated subdirectory,
that are then compiled into a single library:
<ul>
<li><b>core</b> The library core. Contains basic widget data structure, widget
    handling, window system abstraction, font rendering, helper data
    structures, etc.
<li><b>widgets</b> The GUI widgets. Contains only the implementations of the
    individual widgets.
<li><b>dialogs</b> The GUI dialog windows. Contains only the implementations
    of the individual dialog windows.
</ul>
Each of those modules contains an <b>include/</b> directory with headers,
a <b>src/</b> directory with source files and a <b>CMakeLists.txt</b>.<br>
<br>
Other than that, there are few more sub directories:
<ul>
<li><b>build</b> The output directory, see below.
<li><b>CMake</b> Contains CMake files (e.g. mingw cross toolchain config)
<li><b>doc</b> The hand written HTML documation you are reading right now
<li><b>extras</b> Contains example and demo programms
<li><b>tests</b> Contains unit tests
</ul>

In addition, the source directory contains a <b>CMakeLists.txt</b>, a doxygen
<b>Doxyfile</b> the textfiles <b>LICENSE</b> and <b>README</b> as well as the
beforementioned <b>package.sh</b>.
<br>
<br>
The combined <b>include</b> directories, the <b>doc</b> directory, the
<b>extras</b> directory and the generated doxygen documentation end up in the
development package.<br>
<br>
Everything inside the source tree ends up in the source package.<br>
<br>
The <b>LICENSE</b> and <b>README</b> files are added to every package.
<br>
<br>

<h4>The output directory tree</h4>

The output directory initially contains the following entries:
<ul>
<li><b>font</b> This directory contains the TTF font file required by the
    example and demo programs.
<li><b>win_dep</b> This directory contains additional dependencies for
    the Windows&reg; build (currently only FreeType binaries and headers).
<li><b>runvalgrind.sh</b> This script runs valgrind on a sample program using
    the given valgrind supression file.
<li><b>valgrind.supp</b> A valgrind supression file that's supposed to hide
    reported memory leeks inside the X11 XIM functions, and Mesa3D.
</ul>
<br>
When building SGUI, a lot of temporary clutter is generated by CMake and make.
The interesting directores are <b>bin</b> and <b>lib</b>, the former
containing executables and dynamic libraries and the later containing static
libraries.
<br>
<br>

<h4>The CMake build system</h4>

The toplevel CMakeLists.txt in the SGUI source root directory contains, in
the following order:
<ul>
<li>General settings and output path confiugration
<li>Compilation options
<li>Compiler detection and compiler specific configuration
<li>Operating system detection and OS specific configuration
<li>Dependency configuration (mostly also OS specific)
<li><font color="red">compilation target configuration</font>
<li>Doxygen target
<li>Packaging and installation configuration
</ul>
The subdirectories "core", "widgets" and "dialogs" also contain
CMakeLists.txt files. However, those do not add any build targets. They load
a list of source files into CMake variables named after the subdirectories
(<b>CORE_SRC</b>, <b>WIDGETS_SRC</b> and <b>DIALOGS_SRC</b>). Those variables
are then used in the toplevel CMakeLists.txt to setup the target <b>sgui</b>,
since the sources from those subdirectores are compiled into one binary, the
sgui libary itself.<br>
<br>
The directories <b>extras</b> and <b>tests</b> contain CMakeLists.txt files
that actually add compilation targets for executables that use SGUI without
any exterenal intervention from the toplevel file.

<hr>
<a href="hacking.html">Previous</a>
<a href="index.html">Back to index</a>
<a href="hacking.event.html">Next</a>

</body>
</html>

